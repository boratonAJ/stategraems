(function(a){var c={fit:true,directed:false,padding:30,circle:false,boundingBox:undefined,avoidOverlap:true,roots:undefined,maximalAdjustments:0,animate:false,animationDuration:500,ready:undefined,stop:undefined};function b(d){this.options=a.util.extend({},c,d)}b.prototype.run=function(){var g=this.options;var I=g;var F=g.cy;var Z=I.eles;var W=Z.nodes().not(":parent");var X=Z;var ag=a.util.makeBoundingBox(I.boundingBox?I.boundingBox:{x1:0,y1:0,w:F.width(),h:F.height()});var G;if(a.is.elementOrCollection(I.roots)){G=I.roots}else{if(a.is.array(I.roots)){var q=[];for(var ac=0;ac<I.roots.length;ac++){var T=I.roots[ac];var ah=F.getElementById(T);q.push(ah)}G=new a.Collection(F,q)}else{if(a.is.string(I.roots)){G=F.$(I.roots)}else{if(I.directed){G=W.roots()}else{var L=[];var m=W;while(m.length>0){var P=F.collection();Z.bfs({roots:m[0],visit:function(j,ak,aj,w,h){P=P.add(aj)},directed:false});m=m.not(P);L.push(P)}G=F.collection();for(var ac=0;ac<L.length;ac++){var k=L[ac];var aa=k.maxDegree(false);var o=k.filter(function(){return this.degree(false)===aa});G=G.add(o)}}}}}var C=[];var ai={};var H={};var B={};var af={};var v={};X.bfs({roots:G,directed:I.directed,visit:function(ak,aj,w,j,am){var ao=this[0];var h=ao.id();if(!C[aj]){C[aj]=[]}C[aj].push(ao);ai[h]=true;H[h]=aj;B[h]=am;af[h]=j;if(am){var an=am.id();var al=v[an]=v[an]||[];al.push(w)}}});var K=[];for(var ac=0;ac<W.length;ac++){var ah=W[ac];if(ai[ah.id()]){continue}else{K.push(ah)}}var x=K.length*3;var M=0;while(K.length!==0&&M<x){var R=K.shift();var V=R.neighborhood().nodes();var u=false;for(var ac=0;ac<V.length;ac++){var r=H[V[ac].id()];if(r!==undefined){C[r].push(R);u=true;break}}if(!u){K.push(R)}M++}while(K.length!==0){var R=K.shift();var u=false;if(!u){if(C.length===0){C.push([])}C[0].push(R)}}var O=function(){for(var aj=0;aj<C.length;aj++){var h=C[aj];for(var w=0;w<h.length;w++){var ak=h[w];ak._private.scratch.breadthfirst={depth:aj,index:w}}}};O();var s=function(w){var an=w.connectedEdges(function(){return this.data("target")===w.id()});var al=w._private.scratch.breadthfirst;var aj=0;var h;for(var ao=0;ao<an.length;ao++){var j=an[ao];var am=j.source()[0];var ak=am._private.scratch.breadthfirst;if(al.depth<=ak.depth&&aj<ak.depth){aj=ak.depth;h=am}}return h};for(var e=0;e<I.maximalAdjustments;e++){var n=C.length;var A=[];for(var ac=0;ac<n;ac++){var r=C[ac];var U=r.length;for(var ab=0;ab<U;ab++){var ah=r[ab];var ae=ah._private.scratch.breadthfirst;var E=s(ah);if(E){ae.intEle=E;A.push(ah)}}}for(var ac=0;ac<A.length;ac++){var ah=A[ac];var ae=ah._private.scratch.breadthfirst;var E=ae.intEle;var l=E._private.scratch.breadthfirst;C[ae.depth].splice(ae.index,1);var t=l.depth+1;while(t>C.length-1){C.push([])}C[t].push(ah);ae.depth=t;ae.index=C[t].length-1}O()}var p=0;if(I.avoidOverlap){for(var ac=0;ac<W.length;ac++){var Y=W[ac].outerWidth();var ad=W[ac].outerHeight();p=Math.max(p,Y,ad)}p*=1.75}var D={};var J=function(ap){if(D[ap.id()]){return D[ap.id()]}var w=ap._private.scratch.breadthfirst.depth;var ao=ap.neighborhood().nodes();var ak=0;var al=0;for(var j=0;j<ao.length;j++){var am=ao[j];var aj=am._private.scratch.breadthfirst.index;var h=am._private.scratch.breadthfirst.depth;var an=C[h].length;if(w>h||w===0){ak+=aj/an;al++}}al=Math.max(1,al);ak=ak/al;if(al===0){ak=undefined}D[ap.id()]=ak;return ak};var z=function(i,h){var j=J(i);var w=J(h);return j-w};for(var N=0;N<3;N++){for(var ac=0;ac<C.length;ac++){C[ac]=C[ac].sort(z)}O()}var f=0;for(var ac=0;ac<C.length;ac++){f=Math.max(C[ac].length,f)}var d={x:ag.x1+ag.w/2,y:ag.x1+ag.h/2};var S=function(av,au){var j=av._private.scratch.breadthfirst;var ak=j.depth;var an=j.index;var aq=C[ak].length;if(I.strictHierarchy){aq=f}var at=Math.max(ag.w/(aq+1),p);var ar=Math.max(ag.h/(C.length+1),p);var ao=Math.min(ag.w/2/C.length,ag.h/2/C.length);ao=Math.max(ao,p);if(I.strictHierarchy&&!I.circle){var w={x:d.x+(an+1-(aq+1)/2)*at,y:(ak+1)*ar};if(au){return w}var am=v[av.id()];if(am){w.x=0;for(var aj=0;aj<am.length;aj++){var ap=Q[am[aj].id()];w.x+=ap.x}w.x/=am.length}else{}return w}else{if(I.circle){var al=ao*ak+ao-(C.length>0&&C[0].length<=3?ao/2:0);var h=2*Math.PI/C[ak].length*an;if(ak===0&&C[0].length===1){al=1}return{x:d.x+al*Math.cos(h),y:d.y+al*Math.sin(h)}}else{return{x:d.x+(an+1-(aq+1)/2)*at,y:(ak+1)*ar}}}};var Q={};for(var ac=C.length-1;ac>=0;ac--){var r=C[ac];for(var ab=0;ab<r.length;ab++){var R=r[ab];var y=S(R,ac===C.length-1);Q[R.id()]={x:y.y,y:y.x}}}W.layoutPositions(this,I,function(){return Q[this.id()]});return this};a("layout","horizontalTree",b)})(cytoscape);